---
- name: 'Check that role supports target OS'
  when: 'ansible_os_family not in ["Archlinux"]'
  tags: 'user'
  ansible.builtin.fail:
    msg: >-
      This role does not yet support target distribution;
      Target OS family is: {{ ansible_os_family }}.

- name: 'Install system administration tools'
  become: true
  become_user: 'root'
  ansible.builtin.package:
    state: 'present'
    name:
      - 'socat'
      - 'pciutils'
      - 'usbutils'
      - 'smartmontools'
      - 'lm_sensors'
      - 'upower'
      - 'lshw'
      - 'hwloc'
      - 'upower'
      - 'acpi'

      # TODO: this one is needed only on Arch-based
      # desktops, as it provides udev rules for USB
      # LTE dongles.
      #
      # Make it conditional depending on host's group
      # and distro?
      - 'usb_modeswitch'

